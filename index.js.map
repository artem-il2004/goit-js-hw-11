{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nexport default async function httpRequest(q, page, PerPage) {\n    try {\n        const response = await axios.get(\"https://pixabay.com/api/\", {\n            params: {\n                key: \"47392401-769446c280b709c486589ce4f\",\n                q,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: \"true\",\n                page: page,\n                per_page: PerPage,\n            },\n        });\n\n        const responseData = response.data;\n        \n        if (responseData.totalHits === 0) { \n                 iziToast.show({\n            position: 'topRight',\n            iconUrl: \"../img/x.svg\",\n            message: \"Sorry, there are no images matching your search query. Please try again!\",\n            backgroundColor: \"#EF4040\",\n            messageColor: \"white\",\n                 });\n        \n        }\n\n        \n        return responseData;\n    } catch (error) {\n        iziToast.show({\n            position: 'topRight',\n            iconUrl: \"../img/x.svg\",\n            message: \"Something went wrong. Please try again later!\",\n            backgroundColor: \"#EF4040\",\n            messageColor: \"white\",\n        });\n        return [];\n    }\n}\n","\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport default function renderIMG(hits) {\n    const gallery = document.querySelector(\".gallery\"); \n    const imgMarkup = hits\n        .map(({largeImageURL, webformatURL, tags, likes, views, comments, downloads }) => {\n            return `\n            <li class=\"list-item\">\n\n            <a href=\"${largeImageURL}\" >  <img class=\"image\" src=\"${webformatURL}\" alt=\"${tags}\"></a>\n             \n                <ul class=\"info-list\">\n                <li class=\"info-item\"> <h3 class=\"infoTitle\">Likes</h3> <p class=\"infoTxt\">${likes}</p></li>\n                <li class=\"info-item\"><h3 class=\"infoTitle\">Views</h3> <p class=\"infoTxt\">${views}</p></li>\n                <li class=\"info-item\"><h3 class=\"infoTitle\">Comments</h3> <p class=\"infoTxt\">${comments}</p></li>\n                <li class=\"info-item\"><h3 class=\"infoTitle\">Downloads</h3> <p class=\"infoTxt\">${downloads}</p></li>\n                </ul>\n              </li>  \n            `;\n        })\n        .join(\"\");\n    \n    gallery.insertAdjacentHTML('beforeend', imgMarkup); \n    const lightbox = new SimpleLightbox('.gallery a');\n    lightbox.refresh();\n}\n","import iziToast from 'izitoast';\nimport httpRequest from './js/pixabay-api.js';\nimport renderIMG from './js/render-functions.js';\n\nconst submit = document.querySelector(\".form-input\");\nconst loadBTN = document.querySelector('.loadMoreBTN');\nconst loadingMessage = document.querySelector(\".loadSpin\");\nlet page = 1;\nconst perPage = 15;\nlet formValue = '';\nlet imgLeft = 0;\n\n\nfunction handleLoadMore(event) {\n    event.preventDefault();\n\n    loadingMessage.style.display = \"flex\";\n\n    page += 1;\n\n    httpRequest(formValue, page, perPage)\n        .then(responseData => {\n            imgLeft -= responseData.hits.length;\n\n            if (imgLeft <= 0) {\n                iziToast.show({\n                    message: \"We're sorry, but you've reached the end of search results.\"\n                });\n                loadBTN.style.display = 'none'; \n            }\n         \n            return responseData.hits;\n        })\n        .then(hits => { \n            renderIMG(hits);\n        })\n        .then(() => { \n            window.scrollBy({\n                top: 209.19 * 2,  \n                behavior: \"smooth\",\n            });\n        })\n        .catch(error => {\n            iziToast.show({\n                message: \"Something went wrong\"\n            });\n        })\n        .finally(() => {\n            loadingMessage.style.display = \"none\";\n        });\n}\n\n\nfunction handleSubmit(event) { \n    event.preventDefault();\n    formValue = event.target.elements['input-field'].value.trim();\n    const loadingMessage = document.querySelector(\".loader-container\");\n    const gallery = document.querySelector(\".gallery\");\n\n    page = 1;\n\n    if (!formValue) {\n        iziToast.show({\n            message: \"Sorry, you forgot necessary information\",\n        });\n\n        loadBTN.style.display = 'none';\n        return;\n    } else { \n        loadingMessage.style.display = \"flex\";\n        httpRequest(formValue, page, perPage)\n            .then(responseData => {\n                loadingMessage.style.display = \"none\";\n                gallery.innerHTML = \"\";\n                imgLeft = responseData.totalHits; \n                imgLeft -= responseData.hits.length; \n                \n                renderIMG(responseData.hits);\n\n                if (responseData.totalHits <= perPage || responseData.hits.length === 0) {\n                    loadBTN.style.display = 'none';\n                } else { \n                    loadBTN.style.pointerEvents = 'all';\n                    loadBTN.style.display = 'flex';\n                }\n            })\n            .catch(error => {\n                gallery.innerHTML = \"\";\n                iziToast.show({\n                    message: \"Something went wrong\",\n                });\n            })\n            .finally(() => {\n                event.target.reset();\n            });  \n    }\n}\n\n\n\n    \nloadBTN.addEventListener(\"click\", handleLoadMore);\nsubmit.addEventListener(\"submit\", handleSubmit);\n\n"],"names":["httpRequest","q","page","PerPage","responseData","axios","iziToast","renderIMG","hits","gallery","imgMarkup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","SimpleLightbox","submit","loadBTN","loadingMessage","perPage","formValue","imgLeft","handleLoadMore","event","error","handleSubmit"],"mappings":"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"}